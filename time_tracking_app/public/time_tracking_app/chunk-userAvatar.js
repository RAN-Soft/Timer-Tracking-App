import{r as i,e as l,a9 as u}from"./app.js";async function f(){try{await fetch("/api/method/logout",{method:"GET",credentials:"include"})}catch(t){console.error("Logout error",t)}window.location.href="/login?redirect-to=/time-tracking"}function p(t){if(!t)return"U";const e=t.includes("@")?t.split("@")[0]:t;if(e.includes(".")){const r=e.split("."),s=r[0]?.[0]??"",o=r[1]?.[0]??"";return(s+o).toUpperCase()||e.slice(0,2).toUpperCase()}return e.slice(0,2).toUpperCase()}function g(){const t=i("U"),e=l(()=>{const o=["#4F46E5","#EF4444","#10B981","#3B82F6","#F59E0B","#6366F1"],a=t.value||"U";let c=0;for(let n=0;n<a.length;n++)c+=a.charCodeAt(n);return o[c%o.length]});async function r(){try{const o=await u();t.value=p(o)}catch(o){console.warn("Could not load current user for avatar",o)}}async function s(){await f()}return{userInitials:t,avatarColor:e,loadUserInitials:r,logout:s}}export{f as l,g as u};
