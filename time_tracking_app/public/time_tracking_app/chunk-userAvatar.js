import{r as i,d as l,a9 as u}from"./app.js";async function d(){try{await fetch("/api/method/logout",{method:"GET",credentials:"include"})}catch(t){console.error("Logout error",t)}window.location.href="/login?redirect-to=/time-tracking"}function f(t){if(!t)return"U";const r=t.includes("@")?t.split("@")[0]:t;if(r.includes(".")){const e=r.split("."),s=e[0]?.[0]??"",o=e[1]?.[0]??"";return(s+o).toUpperCase()||r.slice(0,2).toUpperCase()}return r.slice(0,2).toUpperCase()}function g(){const t=i("U"),r=l(()=>{const o=["#4F46E5","#EF4444","#10B981","#3B82F6","#F59E0B","#6366F1"],a=t.value||"U";let c=0;for(let n=0;n<a.length;n++)c+=a.charCodeAt(n);return o[c%o.length]});async function e(){try{const o=await u();t.value=f(o)}catch(o){console.warn("Could not load current user for avatar",o)}}async function s(){await d()}return{userInitials:t,avatarColor:r,loadUserInitials:e,logout:s}}export{d as l,g as u};
